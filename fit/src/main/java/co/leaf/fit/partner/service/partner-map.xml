<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="co.leaf.fit.partner.service.PartnerMapper">

    <select id="parSelectList"
        resultType="PartnerVO">
        select * from fit_partner order by par_subdate desc
    </select>

    <select id="parSelect"
        resultType="PartnerVO">
        select p.par_id, p.par_email, p.par_password, p.par_name, r.reg_name, p.par_address, p.par_phone, p.par_intro, p.par_photo, p.par_subdate, p.par_state, p.par_author from fit_partner p inner join fit_region r on p.par_regid = r.reg_id where par_id = #{parId}
    </select>

    <insert id="parInsert" parameterType="PartnerVO">
        insert into fit_partner (par_id, par_email, par_password, par_name, par_regid, par_address, par_phone, par_intro, par_photo, par_subdate) 
        values (FIT_PAR_SEQ.nextval, #{parEmail}, #{parPassword}, #{parName}, #{parRegId}, #{parAddress}, #{parPhone}, #{parIntro}, #{parPhoto}, #{parSubDate})
    </insert>

    <insert id="parUpdateBefore" parameterType="PartnerVO">
		insert into fit_partner (par_id, par_email, par_password, par_name, par_regid, par_address, par_phone, par_intro, par_photo, par_subdate, par_state) 
        values (FIT_PAR_SEQ.nextval, #{parEmail}, #{parPassword}, #{parName}, #{parRegId}, #{parAddress}, #{parPhone}, #{parIntro}, #{parPhoto}, #{parSubDate}, 'M')
    </insert>
    
    <delete id="parUpdateAfter" parameterType="PartnerVO">
        delete from fit_partner where par_email = #{parEmail} and par_state = 'Y'
    </delete>
    
    <update id="parUpdate" parameterType="PartnerVO">
    	update fit_partner set par_state = 'Y' where par_email = #{par_email} and par_state = 'M'
    </update>

    <delete id="parDelete" parameterType="PartnerVO">
        delete from fit_partner where par_email = #{parEmail}
    </delete>
    
    <select id="parLogin" resultType="PartnerVO">
		select * from fit_partner where par_email = #{parEmail} and par_password = #{parPassword}
	</select>

</mapper>